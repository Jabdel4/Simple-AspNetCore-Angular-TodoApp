name: release-infra

parameters:
- name: env
  type: string
  default: dev
  values:
  - dev
  - qa
  - prod

trigger:
    batch: true
    branches:
        include:
        - main
    paths:
        include:
        - pipelines/templates/release-infra-template.yml

variables:
- template: ../variables/variables.${{ parameters.env}}.yml
- group: serviceConnections

jobs:
- template: ../templates/release-infra-template.yml
  # parameters:
  #   azServiceConnection: '$(azServiceConnection)' # Value is in the variable group